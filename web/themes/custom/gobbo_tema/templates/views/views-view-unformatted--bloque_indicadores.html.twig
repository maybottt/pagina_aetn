{#
/**
 * @file
 * Theme override to display a view of unformatted rows.
 *
 * Available variables:
 * - title: The title of this group of rows. May be empty.
 * - rows: A list of the view's row items.
 *   - attributes: The row's HTML attributes.
 *   - content: The row's content.
 * - view: The view object.
 * - default_row_class: A flag indicating whether default classes should be
 *   used on rows.
 *
 * @see template_preprocess_views_view_unformatted()

 */
#}

<div id="indicadores" >
	
	<div id="indicadoresCarrousel" class="row  mx-auto mb-2 justify-content-center enlaces{{ view.dom_id }}">
		<div style="display: flex;" id="carousel{{ view.dom_id }}" class="carousel slide" data-bs-ride="carousel">
			<div class="position-relative mx-2">
				<a class="position-absolute top-50 start-50 translate-middle" href="#carousel{{ view.dom_id }}" role="button"
					data-bs-slide="prev">
					<i class="align-middle bi bi-caret-left-fill"></i>
				</a>
			</div>
			<div class="carousel-inner" role="listbox">
				{% set bandera = true %}
				
				{% for row in rows %}
	
				{# {% set comuinicados = [ %} #}
				{% set enlace =  row.content['#row']._entity.field_enlace_indicador.value %}
				{% set archivo =  row.content['#row']._entity.field_archivo_indicador.value %}

		
				<div class="carousel-item {{ bandera ? 'active' : '' }}">
					<div class='col-12 col-sm-6 col-md-4'>
						{% if enlace|length > 0 %}
						<a href="{{row.content['#row']._entity.field_enlace_indicador.0.url}}" target="_blank">
						{% else %}
						<a target="_blank" href="{{file_url(row.content['#row']._entity.field_archivo_indicador.entity.getFileUri())}}">
						{% endif %}
						
							<div class="card">
								<div class='card-footer bg-transparent' style='border: none;'>
									<div class='row justify-content-center'>
										<div class="col-12 col-md-4">
											<img style="object-fit: cover;"
												 src='{{file_url(row.content['#row']._entity.field_imagen_indicador.entity.getFileUri())}}'
												class='card-img-top mx-auto' alt='imagen' width='auto' height='160px'>
										</div>
										<div class='col-12 col-md-8'>
											<div class="titulo" style="overflow: hidden;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;">
		
												{{row.content['#row']._entity.field_titulo_indicador.value}}
											</div>
											<div class="descripcion pt-2" style="overflow: hidden;display: -webkit-box;-webkit-line-clamp: 4;-webkit-box-orient: vertical;">
		
												{{row.content['#row']._entity.field_descripcion_indicador.value}}
											</div>
		
										</div>
										<div class="col-12 col-md-4"></div>
										<div class='col-12 col-md-8 pt-3'>
											<div class="tiempo">
												Actualizado hace {{row['minutos_desde_publicacion']}} mins
		
											</div>
		
										</div>
									</div>
								</div>
							</div>
						</a>
					</div>
				</div>
				{% set bandera = false %}
				{% endfor %}
			</div>
			<div class="position-relative mx-2">
				<a class="position-absolute top-50 start-50 translate-middle" href="#carousel{{ view.dom_id }}" role="button"
					data-bs-slide="next">
					<i class="bi bi-caret-right-fill"></i>
				</a>
			</div>
		</div>
	</div>

</div>











{# {{dump(view.dom_id)}} #}


<script>
	var dato  = "{{ view.dom_id }}"
	let items{{ view.dom_id }} = document.querySelectorAll('.enlaces{{ view.dom_id }} .carousel .carousel-item')
	items{{ view.dom_id }}.forEach((el) => {
		const minPerSlide = 3
		let next = el.nextElementSibling
		for (var i = 1; i < minPerSlide; i++) {
			if (!next) {
				next = items{{ view.dom_id }}[0]
			}
			let cloneChild = next.cloneNode(true)
			el.appendChild(cloneChild.children[0])
			next = next.nextElementSibling
		}
	})
</script>